# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           makefile 1.0

name                par
version             1.53.0
revision            0
categories          textproc
platforms           darwin
maintainers         gmail.com:qbarnes
description         paragraph reflow for email
long_description    ${description}
license             Permissive
homepage            http://www.nicemice.net/${name}/
master_sites        ${homepage}
distname            [string totitle $name]-$version

checksums           rmd160  d3e46af0f340dcfedebc73f4afda1b6eab0ad945 \
                    sha256  c809c620eb82b589553ac54b9898c8da55196d262339d13c046f2be44ac47804 \
                    size    52209

patchfiles          patch-protoMakefile.diff \
                    patch-test-par.diff

post-patch {
    file copy "${worksrcpath}/protoMakefile" "${worksrcpath}/Makefile"
}

makefile.override   CC CFLAGS LDFLAGS PREFIX MANPREFIX

build.target

test.run            yes

destroot {
    xinstall "${worksrcpath}/${name}" "${destroot}${prefix}/bin/"
    xinstall -m 444 "${worksrcpath}/${name}.1" "${destroot}${prefix}/share/man/man1/"
}

livecheck.type      regex
livecheck.regex     "Par-(\\d+(?:\\.\\d+)(?:\\.\\d+)).tar.gz"
